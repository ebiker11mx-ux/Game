<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>3D Obby Game</title>
<style>
  body { margin: 0; overflow: hidden; background: #000; }
    canvas { display: block; }

      /* Mobile Controls */
        .controls {
            position: fixed;
                bottom: 20px;
                    width: 100%;
                        display: flex;
                            justify-content: space-between;
                                padding: 0 20px;
                                  }
                                    button {
                                        width: 70px;
                                            height: 70px;
                                                font-size: 20px;
                                                    border-radius: 50%;
                                                        border: none;
                                                            background: rgba(255,255,255,0.7);
                                                              }
                                                              </style>
                                                              </head>
                                                              <body>

                                                              <div class="controls">
                                                                <button id="left">◀</button>
                                                                  <button id="jump">⬆</button>
                                                                    <button id="right">▶</button>
                                                                    </div>

                                                                    <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

                                                                    <script>
                                                                    /* SCENE */
                                                                    const scene = new THREE.Scene();
                                                                    scene.background = new THREE.Color(0x87ceeb);

                                                                    /* CAMERA */
                                                                    const camera = new THREE.PerspectiveCamera(
                                                                      75,
                                                                        window.innerWidth / window.innerHeight,
                                                                          0.1,
                                                                            1000
                                                                            );

                                                                            /* RENDERER */
                                                                            const renderer = new THREE.WebGLRenderer({ antialias: true });
                                                                            renderer.setSize(window.innerWidth, window.innerHeight);
                                                                            document.body.appendChild(renderer.domElement);

                                                                            /* LIGHT */
                                                                            const light = new THREE.DirectionalLight(0xffffff, 1);
                                                                            light.position.set(5, 10, 5);
                                                                            scene.add(light);

                                                                            /* PLAYER */
                                                                            const playerGeometry = new THREE.BoxGeometry(1, 1, 1);
                                                                            const playerMaterial = new THREE.MeshStandardMaterial({ color: 0xff0000 });
                                                                            const player = new THREE.Mesh(playerGeometry, playerMaterial);
                                                                            player.position.y = 2;
                                                                            scene.add(player);

                                                                            /* PLATFORMS */
                                                                            const platforms = [];

                                                                            function createPlatform(x, y, z) {
                                                                              const geo = new THREE.BoxGeometry(5, 1, 5);
                                                                                const mat = new THREE.MeshStandardMaterial({ color: 0x00ff00 });
                                                                                  const platform = new THREE.Mesh(geo, mat);
                                                                                    platform.position.set(x, y, z);
                                                                                      scene.add(platform);
                                                                                        platforms.push(platform);
                                                                                        }

                                                                                        createPlatform(0, 0, 0);
                                                                                        createPlatform(7, 2, 0);
                                                                                        createPlatform(14, 4, 0);
                                                                                        createPlatform(21, 6, 0);

                                                                                        /* PHYSICS */
                                                                                        let velocityY = 0;
                                                                                        let onGround = false;
                                                                                        const gravity = 0.02;

                                                                                        /* CAMERA FOLLOW */
                                                                                        camera.position.set(0, 5, 10);

                                                                                        /* CONTROLS */
                                                                                        let moveLeft = false;
                                                                                        let moveRight = false;

                                                                                        document.getElementById("left").ontouchstart = () => moveLeft = true;
                                                                                        document.getElementById("left").ontouchend = () => moveLeft = false;

                                                                                        document.getElementById("right").ontouchstart = () => moveRight = true;
                                                                                        document.getElementById("right").ontouchend = () => moveRight = false;

                                                                                        document.getElementById("jump").ontouchstart = () => {
                                                                                          if (onGround) {
                                                                                              velocityY = 0.35;
                                                                                                  onGround = false;
                                                                                                    }
                                                                                                    };

                                                                                                    /* GAME LOOP */
                                                                                                    function animate() {
                                                                                                      requestAnimationFrame(animate);

                                                                                                        // Movement
                                                                                                          if (moveLeft) player.position.x -= 0.1;
                                                                                                            if (moveRight) player.position.x += 0.1;

                                                                                                              // Gravity
                                                                                                                velocityY -= gravity;
                                                                                                                  player.position.y += velocityY;

                                                                                                                    // Collision
                                                                                                                      onGround = false;
                                                                                                                        platforms.forEach(p => {
                                                                                                                            if (
                                                                                                                                  player.position.x > p.position.x - 2.5 &&
                                                                                                                                        player.position.x < p.position.x + 2.5 &&
                                                                                                                                              player.position.y <= p.position.y + 1 &&
                                                                                                                                                    player.position.y >= p.position.y &&
                                                                                                                                                          player.position.z === p.position.z
                                                                                                                                                              ) {
                                                                                                                                                                    velocityY = 0;
                                                                                                                                                                          player.position.y = p.position.y + 1;
                                                                                                                                                                                onGround = true;
                                                                                                                                                                                    }
                                                                                                                                                                                      });

                                                                                                                                                                                        // Fall reset
                                                                                                                                                                                          if (player.position.y < -10) {
                                                                                                                                                                                              player.position.set(0, 2, 0);
                                                                                                                                                                                                  velocityY = 0;
                                                                                                                                                                                                    }

                                                                                                                                                                                                      // Camera follow
                                                                                                                                                                                                        camera.position.x = player.position.x;
                                                                                                                                                                                                          camera.lookAt(player.position);

                                                                                                                                                                                                            renderer.render(scene, camera);
                                                                                                                                                                                                            }

                                                                                                                                                                                                            animate();

                                                                                                                                                                                                            /* RESIZE */
                                                                                                                                                                                                            window.addEventListener("resize", () => {
                                                                                                                                                                                                              camera.aspect = window.innerWidth / window.innerHeight;
                                                                                                                                                                                                                camera.updateProjectionMatrix();
                                                                                                                                                                                                                  renderer.setSize(window.innerWidth, window.innerHeight);
                                                                                                                                                                                                                  });
                                                                                                                                                                                                                  </script>

                                                                                                                                                                                                                  </body>
                                                                                                                                                                                                                  </html>